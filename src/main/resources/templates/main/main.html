<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>POPBOX | ì˜í™”, ì˜ˆë§¤, ê·¹ì¥</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <style>
        body {
            background-color: #fff;
        }
        .navbar {
            background-color: #29220A;
            border-bottom: 1px solid #636363;
            padding: 10px 15px;
        }
        .container-fluid {
            max-width: 900px; /* ì „ì²´ ê°€ë¡œ í­ ì••ì¶• */
            margin: 0 auto;
        }
        .navbar-nav {
            width: 100%;
            display: flex;
            justify-content: space-between; /* ìš”ì†Œë“¤ ê°„ê²© ê· í˜• */
            align-items: center;
            gap: 10px; /* ìš”ì†Œë“¤ ê°„ê²© ì¡°ì • */
        }
        .nav-item a {
            color: #D8D8D8;
            font-size: 14px;
            font-weight: bold;
            text-decoration: none;
            padding: 5px 10px; /* íŒ¨ë”© ì¤„ì´ê¸° */
        }
        .nav-item a:hover {
            color: #ffcc00;
        }
        .menuimage {
            height: 28px; /* ì•„ì´ì½˜ í¬ê¸° ì¤„ì´ê¸° */
            width: 28px;
        }
        /* ê³ ê°ì„¼í„° & ë¡œê·¸ì¸ í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        .nav-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        .nav-icon a {
            font-size: 10px;
            color: #BDBDBD;
            text-decoration: none;
            display: block;
            margin-bottom: 2px;
        }
        .nav-icon a:hover {
            color: #ffcc00;
        }
        /* POPBOX ë¡œê³  ìŠ¤íƒ€ì¼ */
        .logo-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .logo-container {
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #29220A;
            padding: 3px;
            width: fit-content;
            border-radius: 3px;
        }
        .logo-text {
            display: flex;
        }
        /* POPBOX ë°•ìŠ¤ í¬ê¸° ì¤„ì´ê¸° */
        .letter {
            font-size: 14px;
            font-weight: bold;
            font-family: 'Arial', sans-serif;
            width: 18px;
            height: 22px;
            display: flex;
            background-color: #F2F2F2;
            justify-content: center;
            align-items: center;
            margin: 1px;
        }
        .letter:nth-child(odd) {
            color: #FFD700;
        }
        .letter:nth-child(even) {
            color: #FFA500;
        }
        /* ENJOY THE MOVIE (ë°°ê²½ìƒ‰ ë¶„ë¦¬) */
        .enjoy-text {
            font-size: 12px;
            font-weight: bold;
            font-family: 'Arial', sans-serif;
            text-transform: uppercase;
            display: flex;
            color: #ffffff;
            justify-content: center;
            line-height: 1;
            margin-top: 3px;
        }
        /*.enjoy-text span:nth-child(odd) {
            color: #FFD700;
        }
        .enjoy-text span:nth-child(even) {
            color: #FFA500;
        }*/
        #main_boxoffice{
        	background: linear-gradient(to bottom, black, #302710);
        }
        
        
        
		/* ë§ˆìš°ìŠ¤ ìŠ¤í¬ë¡¤ ì• ë‹ˆë©”ì´ì…˜ ì»¨í…Œì´ë„ˆ */
		.mouse-scroll {
		    display: flex;
		    justify-content: center;
		    align-items: center;
		    margin-top: 50px; /* ì›í•˜ëŠ” ìœ„ì¹˜ ì¡°ì • */
		}
		
		/* ë§ˆìš°ìŠ¤ ëª¨ì–‘ */
		.mouse {
		    width: 20px;
		    height: 30px;
		    border: 2px solid #C0C0C0; /* íšŒìƒ‰ í…Œë‘ë¦¬ */
		    border-radius: 25px;
		    position: relative;
		}
		
		/* ìŠ¤í¬ë¡¤ ì• ë‹ˆë©”ì´ì…˜ (ì•ˆìª½ ì ) */
		.scroll {
		    width: 3px;
		    height: 5px;
		    background-color: #C0C0C0; /* ì  ìƒ‰ìƒ */
		    border-radius: 50%;
		    position: absolute; /* ë¶€ëª¨ ì»¨í…Œì´ë„ˆë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìœ„ì¹˜ì‹œí‚´ */
		    top: 3px;	/* top: 3px;ì„ ì œê±°í•˜ë©´, ì• ë‹ˆë©”ì´ì…˜ì´ ë¹„í™œì„±í™”ë˜ì—ˆì„ ë•Œ ìš”ì†Œê°€ ì–´ë””ì— ìˆì–´ì•¼ í•˜ëŠ”ì§€ ëª…í™•í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ. */
		    left: 50%; /* ë¶€ëª¨ ìš”ì†Œì˜ ê°€ë¡œ ê°€ìš´ë°ë¡œ ì´ë™ */
		    transform: translateX(-50%); /* left ê°’ë§Œ ì§€ì •í•˜ë©´ ìš”ì†Œì˜ ì™¼ìª½ ëì´ 50% ìœ„ì¹˜ë¡œ ì´ë™í•˜ë¯€ë¡œ ì–˜ë¥¼ ì¨ì„œ ê°€ë¡œ ì¤‘ì•™ ì •ë ¬ì„ ì •í™•íˆ ë§ì¶¤ */
		    animation: scroll-animation 1.5s infinite ease-in-out; /* ì—ë‹ˆë©”ì´ì…˜ 1.5ì´ˆ ë¬´í•œë°˜ë³µ ì²œì²œíˆ-ì¤‘ê°„ë¹¨ë¼ì¡Œë‹¤-ì²œì²œíˆ*/
		}
		
		/* ì ì´ ìœ„ì•„ë˜ë¡œ ì›€ì§ì´ëŠ” ì• ë‹ˆë©”ì´ì…˜ */
		@keyframes scroll-animation {
		    0% {
		        top: 3px; /* ì‹œì‘ì‹œ 3px */
		        opacity: 1; /* íˆ¬ëª…ë„ 1=ë¶ˆíˆ¬ëª… 0=ë°˜íˆ¬ëª… */
		    }
		    50% {
		        top: 10px; /* ì¤‘ê°„ì— 7px ë‚´ë ¤ê° */
		        opacity: 0.5;
		    }
		    100% {
		        top: 3px;
		        opacity: 1;
		    }
		}
    </style>
<script type="text/javascript" th:inline="javascript">
console.log("session.memId:", /*[[${session.memId}]]*/ "NULL");
function checkLogin(event) {
    event.preventDefault(); // ê¸°ë³¸ ë§í¬ ì´ë™ ë°©ì§€

    var isLoggedIn = /*[[${session.memId != null}]]*/ false; // Thymeleafë¡œ ë¡œê·¸ì¸ ì—¬ë¶€ ì²´í¬

    if (!isLoggedIn) {
        alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
        window.location.href = "/member/loginForm"; // ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
    } else {
        window.location.href = "/mypageMain"; // ë§ˆì´í˜ì´ì§€ ì´ë™
    }
}


document.addEventListener('DOMContentLoaded', function () {
    document.querySelectorAll('.wish-btn').forEach(button => {
        button.addEventListener('click', function () {
            const moviecode = this.dataset.moviecode;
            const isWished = this.dataset.wished === 'true';
            const url = `/movieinfo/wish/${moviecode}`;
            const method = isWished ? 'DELETE' : 'POST';

            fetch(url, {
                method: method,
                headers: {
                    'Content-Type': 'application/json'
                }
            })
            .then(response => {
                if (!response.ok) {
                    if (response.status === 401) {
                        alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                        window.location.href = '/member/loginForm';
                    }
                    throw new Error('ìš”ì²­ ì‹¤íŒ¨');
                }
                return response.json();
            })
            .then(data => {
                // ê°™ì€ moviecodeë¥¼ ê°€ì§„ ëª¨ë“  ë²„íŠ¼ì— ëŒ€í•´ UI ì—…ë°ì´íŠ¸
                document.querySelectorAll(`.wish-btn[data-moviecode='${moviecode}']`).forEach(btn => {
                    const heartIcon = btn.querySelector('.heart-icon');
                    const countSpan = btn.nextElementSibling;

                    btn.dataset.wished = (!isWished).toString();
                    heartIcon.textContent = isWished ? 'ğŸ¤' : 'â¤ï¸';
                    countSpan.textContent = data.wishCount;
                });
            })
            .catch(err => console.error(err));
        });
    });
});

window.addEventListener("pageshow", function (event) {
    // ìƒˆë¡œ ë¡œë“œë˜ì—ˆê±°ë‚˜, ë’¤ë¡œê°€ê¸° ë³µì›ëœ ê²½ìš° ëª¨ë‘ ì´ˆê¸°í™”
    localStorage.removeItem("selectedItems");
});
</script>

</head>
<body>

    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <ul class="navbar-nav">
                <!-- ì™¼ìª½ ë©”ë‰´ (ê³ ê°ì„¼í„° & ë©”ë‰´) -->
                <li class="nav-item nav-icon">
                    <a href="/customerServiceMain">ê³ ê°ì„¼í„°</a>
                    <a href="#">
                        <img class="menuimage" src="/menuimage/mainmenubar.jpg" alt="MENU">
                    </a>                           
                </li>

                <li class="nav-item"><a href="#">ì˜í™”</a></li>
                <li class="nav-item"><a href="/booking">ì˜ˆë§¤</a></li>

                <!-- ì¤‘ì•™ POPBOX ë¡œê³  -->
				<li class="nav-item logo-wrapper">
				    <div class="logo-clickable" onclick="location.href='/main'"> <!--  í´ë¦­í•˜ë©´ /main ì´ë™ -->
				        <div class="logo-container">
				            <div class="logo-text">
				                <div class="letter">P</div>
				                <div class="letter">O</div>
				                <div class="letter">P</div>
				                <div class="letter">B</div>
				                <div class="letter">O</div>
				                <div class="letter">X</div>
				            </div>
				        </div>
				        <div class="enjoy-text">
				            <span>E</span><span>N</span><span>J</span><span>O</span><span>Y</span>
				            <span> </span>
				            <span>T</span><span>H</span><span>E</span>
				            <span> </span>
				            <span>M</span><span>O</span><span>V</span><span>I</span><span>E</span>
				        </div>
				    </div>
				</li>


                <li class="nav-item"><a href="/store/store_board_list2">ìŠ¤í† ì–´</a></li>
                <li class="nav-item"><a href="#">VIP</a></li>

                <!-- ì˜¤ë¥¸ìª½ ë©”ë‰´ (ë¡œê·¸ì¸ & ë§ˆì´í˜ì´ì§€) -->
                <li class="nav-item nav-icon">
                    <th:block th:if="${session.memId == null}">
                        <a href="/member/loginForm">ë¡œê·¸ì¸</a>
                    </th:block>
                    <th:block th:if="${session.memId != null}">
                        <a href="/member/logout">ë¡œê·¸ì•„ì›ƒ</a>
                    </th:block>
                    <th:block th:if="${session.memId == 'hong'}">
                    	<a href="/admin/admin_index"> ê´€ë¦¬ì í™ˆí˜ì´ì§€ë¡œ</a>
                    </th:block>
                    <a href="#" onclick="checkLogin(event)">
                        <img class="menuimage" src="/menuimage/mainmypage.jpg" alt="MYPAGE">
                    </a>
                </li>
            </ul>
        </div>
    </nav>
    
    
    <div id="main_boxoffice">
		<table style="margin-top: 60px; margin-left:auto; margin-right:auto;">
			<tr>
				<td colspan="4" align="center" style="width:900px;"><span style="color: #F2F2F2;">ë°•ìŠ¤ì˜¤í”¼ìŠ¤</span>
					<span style="position: absolute; right: 300px; color: #ADADAD; font-size: 10px;">ë” ë³´ê¸° +</span>
				</td>
			</tr>
		    <tr>
		        <!-- ê° ì˜í™” ì •ë³´ë¥¼ ì—´ë¡œ ì •ë ¬ -->
		        <td th:each="dto1 : ${list_boxoffice}" align="center">
		            <!-- ì˜í™” í¬ìŠ¤í„° -->
		            <a th:href="|/movieinfo/moviedetail?moviecode=${dto1.moviecode}|">
		                <img style="padding:10px;"width="230" height="320" th:src="|/movie_poster/${dto1.poster1}|" alt="ì˜í™” í¬ìŠ¤í„°">
		            </a>
		
					<!-- ì¢‹ì•„ìš” ë° ì˜ˆë§¤ ë²„íŠ¼ -->
					<div style="margin-top: 10px; text-align: center;">
					    <button class="wish-btn" 
					            th:data-moviecode="${dto1.moviecode}" 
					            th:data-wished="${dto1.wished}" 
					            style="background:none; border:none; font-size:20px; color:white; cursor:pointer;">
					        <span class="heart-icon" th:text="${dto1.wished} ? 'â¤ï¸' : 'ğŸ¤'"></span>
					    </button>
					    <span class="wish-count" th:text="${dto1.wishCount}" style="color:white;"></span> <!-- ì°œ ê°œìˆ˜ í‘œì‹œ -->
					    
					    <button style="background-color: #007bff; color: white; border: none; padding: 5px 10px; margin-left: 10px; cursor: pointer;">
					        ì˜ˆë§¤
					    </button>
					</div>
		        </td>
		    </tr>
		    

		</table>
		<table style="margin-top:30px; margin-bottom:50px; width:900px; margin-left:auto; margin-right:auto;">
		    <tr style="text-align:center; color:#F2F2F2;">
		    	<td style="width:225px; background-color:#241D0B; padding-top:20px; padding-bottom:20px;">ê²€ìƒ‰ì€ í¬ë§ì‚¬í•­<div class="separator"></div></td>
		    	<td style="width:225px; background-color:#241D0B; padding-top:20px; padding-bottom:20px;">ìƒì˜ì‹œê°„í‘œ<div class="separator"></div></td>
		    	<td style="width:225px; background-color:#241D0B; padding-top:20px; padding-bottom:20px;">ë°•ìŠ¤ì˜¤í”¼ìŠ¤<div class="separator"></div></td>
		    	<td style="width:225px; background-color:#241D0B; padding-top:20px; padding-bottom:20px;">ì˜ˆë§¤</td>
		    </tr>
		</table>
		<!-- ë§ˆìš°ìŠ¤ ìŠ¤í¬ë¡¤ ì• ë‹ˆë©”ì´ì…˜ -->
		<div class="mouse-scroll" style="margin-bottom:20px;">
		    <div class="mouse">
		        <div class="scroll"></div>
		    </div>
		</div>
    </div>
    
    
    <div id="main-total">
		<table style="margin-top: 50px; margin-left:auto; margin-right:auto; margin-bottom:30px;">
			<tr>
				<td colspan="4" align="left" style="width:900px;"><span style="color: #29220A;">ëˆ„ì ê´€ê°ìˆ˜ ìˆœ</span>
					<span style="position: absolute; right: 300px; color: #695719; font-size: 10px;">ë” ë³´ê¸° +</span>
				</td>
			</tr>
		    <tr>
		        <!-- ê° ì˜í™” ì •ë³´ë¥¼ ì—´ë¡œ ì •ë ¬ -->
		        <td th:each="dto2 : ${list_total}" align="center">
		            <!-- ì˜í™” í¬ìŠ¤í„° -->
		            <a th:href="|/movieinfo/moviedetail?moviecode=${dto2.moviecode}|">
		                <img style="padding:10px;"width="230" height="320" th:src="|/movie_poster/${dto2.poster1}|" alt="ì˜í™” í¬ìŠ¤í„°">
		            </a>
		
					<!-- ì¢‹ì•„ìš” ë° ì˜ˆë§¤ ë²„íŠ¼ -->
					<div style="margin-top: 10px; text-align: center;">
					    <button class="wish-btn" 
					            th:data-moviecode="${dto2.moviecode}" 
					            th:data-wished="${dto2.wished}" 
					            style="background:none; border:none; font-size:20px; color:white; cursor:pointer;">
					        <span class="heart-icon" th:text="${dto2.wished} ? 'â¤ï¸' : 'ğŸ¤'"></span>
					    </button>
					    <span class="wish-count" th:text="${dto2.wishCount}"></span> <!-- ì°œ ê°œìˆ˜ í‘œì‹œ -->
					    
					    <button style="background-color: #007bff; color: white; border: none; padding: 5px 10px; margin-left: 10px; cursor: pointer;">
					        ì˜ˆë§¤
					    </button>
					</div>
		        </td>
		    </tr>
		</table>
    </div>
    
    
    <div id="main-korea" style="background-color:#D4D18B;">
		<table style="margin-top: 50px; margin-left:auto; margin-right:auto; margin-bottom:30px;">
			<tr>
				<td colspan="4" align="left" style="width:900px;"><span style="color: #29220A;">êµ­ë‚´ì˜í™” ë°•ìŠ¤ì˜¤í”¼ìŠ¤</span>
					<span style="position: absolute; right: 300px; color: #695719; font-size: 10px;">ë” ë³´ê¸° +</span>
				</td>
			</tr>
		    <tr>
		        <!-- ê° ì˜í™” ì •ë³´ë¥¼ ì—´ë¡œ ì •ë ¬ -->
		        <td th:each="dto3 : ${list_korea}" align="center">
		            <!-- ì˜í™” í¬ìŠ¤í„° -->
		            <a th:href="|/movieinfo/moviedetail?moviecode=${dto3.moviecode}|">
		                <img style="padding:10px;"width="230" height="320" th:src="|/movie_poster/${dto3.poster1}|" alt="ì˜í™” í¬ìŠ¤í„°">
		            </a>
		
					<!-- ì¢‹ì•„ìš” ë° ì˜ˆë§¤ ë²„íŠ¼ -->
					<div style="margin-top: 10px; text-align: center;">
					    <button class="wish-btn" 
					            th:data-moviecode="${dto3.moviecode}" 
					            th:data-wished="${dto3.wished}" 
					            style="background:none; border:none; font-size:20px; color:white; cursor:pointer;">
					        <span class="heart-icon" th:text="${dto3.wished} ? 'â¤ï¸' : 'ğŸ¤'"></span>
					    </button>
					    <span class="wish-count" th:text="${dto3.wishCount}"></span> <!-- ì°œ ê°œìˆ˜ í‘œì‹œ -->
					    
					    <button style="background-color: #007bff; color: white; border: none; padding: 5px 10px; margin-left: 10px; cursor: pointer;">
					        ì˜ˆë§¤
					    </button>
					</div>
		        </td>
		    </tr>
		</table>
    </div>
    
    <div id="main-foreign" style="background-color:#FFFCCC">
		<table style="margin-top: 50px; margin-left:auto; margin-right:auto; margin-bottom:30px;">
			<tr>
				<td colspan="4" align="left" style="width:900px;"><span style="color: #29220A;">í•´ì™¸ì˜í™” ë°•ìŠ¤ì˜¤í”¼ìŠ¤</span>
					<span style="position: absolute; right: 300px; color: #695719; font-size: 10px;">ë” ë³´ê¸° +</span>
				</td>
			</tr>
		    <tr>
		        <!-- ê° ì˜í™” ì •ë³´ë¥¼ ì—´ë¡œ ì •ë ¬ -->
		        <td th:each="dto4 : ${list_foreign}" align="center">
		            <!-- ì˜í™” í¬ìŠ¤í„° -->
		            <a th:href="|/movieinfo/moviedetail?moviecode=${dto4.moviecode}|">
		                <img style="padding:10px;"width="230" height="320" th:src="|/movie_poster/${dto4.poster1}|" alt="ì˜í™” í¬ìŠ¤í„°">
		            </a>
		
					<!-- ì¢‹ì•„ìš” ë° ì˜ˆë§¤ ë²„íŠ¼ -->
					<div style="margin-top: 10px; text-align: center;">
					    <button class="wish-btn" 
					            th:data-moviecode="${dto4.moviecode}" 
					            th:data-wished="${dto4.wished}" 
					            style="background:none; border:none; font-size:20px; color:white; cursor:pointer;">
					        <span class="heart-icon" th:text="${dto4.wished} ? 'â¤ï¸' : 'ğŸ¤'"></span>
					    </button>
					    <span class="wish-count" th:text="${dto4.wishCount}"></span> <!-- ì°œ ê°œìˆ˜ í‘œì‹œ -->
					    
					    <button style="background-color: #007bff; color: white; border: none; padding: 5px 10px; margin-left: 10px; cursor: pointer;">
					        ì˜ˆë§¤
					    </button>
					</div>
		        </td>
		    </tr>
		</table>
    </div>    
    
    <div id="header-container">
        <div th:replace="~{layouts/footer}"></div>
    </div>
</body>
</html>
